



## 📋 **后端-导航分类表接口文档创建提示词**

### 🎯 **文档目标**

创建一个完整的导航分类表（nav_categories）后端API接口文档，包含标准的CRUD操作接口。

### 📊 **数据表结构参考**

基于SQLite数据库设计的 nav_categories

 表：

- 字段：id,parent_id,name,description,sort_order,level,is_public,created_at
- **特性**：支持层级结构（parent_id），公开状态控制，排序功能

### 🔧 **需要创建的接口**

#### **1. 查询接口（Query）**

- 获取所有分类树结构：GET /api/categories/tree
  - 支持分页参数（page, size）
  - 支持筛选参数（level, is_public, parent_id）
  - 支持排序（sort_order, created_at）
- 获取分类树结构：GET /api/categories/tree
  - 返回完整的层级树结构
- 获取单个分类详情：GET /api/categories/{id}
- 获取子分类列表：GET /api/categories/{id}/children

#### **2. 新增接口（Create）**

- 创建新分类：POST /api/categories
  - 必填字段：name
  - 可选字段：parent_id, description, sort_order, level, is_public

#### **3. 修改接口（Update）**

- 更新分类信息：PUT /api/categories/{id}
  - 支持更新：name, description, sort_order, is_public
  - parent_id变更需要特殊处理（防止循环引用）

#### **4. 删除接口（Delete）**

- 删除分类：DELETE /api/categories/{id}
  - 需要检查是否有子分类
  - 需要检查是否有关联的导航项
  - 支持级联删除选项

### 📝 **文档规范要求**

#### **技术规范**

- **数据库**：SQLite 3.0+

- **认证方式**：JWT Token

- 响应格式：统一JSON格式

  ```
  {code, msg, data}
  ```

- **HTTP状态码**：标准RESTful状态码

- **字符编码**：UTF-8

#### **文档结构**

1. **接口概述**：功能说明和技术栈
2. **数据库设计**：表结构和字段说明
3. **通用响应格式**：标准响应结构
4. **查询接口**：列表、详情、树结构、子分类
5. **新增接口**：创建分类
6. **修改接口**：更新分类信息
7. **删除接口**：删除分类
8. **接口设计说明**：安全、验证、错误处理
9. **使用示例**：完整的前端调用示例

#### **每个接口需包含**

- 基本信息（路径、方法、描述）
- 请求参数（路径参数、查询参数、请求体）
- 响应数据（成功和失败示例）
- 错误码说明
- 注意事项

### 🔒 **特殊处理要求**

#### **层级结构处理**

- parent_id为NULL表示顶级分类
- level字段自动计算（1=顶级，2=二级）
- 防止循环引用检查

#### **数据验证**

- 分类名称唯一性检查（同级别下）
- parent_id有效性验证
- sort_order数值范围验证

#### **安全考虑**

- JWT Token认证
- 参数SQL注入防护
- 权限控制（公开状态）