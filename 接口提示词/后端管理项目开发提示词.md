# 导航系统后端管理项目开发提示词

## 项目概述
基于现有的导航系统，开发一个完整的后端管理系统，用于管理导航分类、导航项目、用户权限等功能。该管理系统将与现有的用户登录系统集成，并为客户端导航页面提供数据支持。

## 开发需求分析

### 1. 项目架构
- **前端**: Vue3 + Element Plus 
- **后端**: Python Flask (复用现有后端)
- **数据库**: SQLite (扩展现有数据库)
- **认证**: JWT Token (复用现有认证系统)

### 2. 数据库扩展需求

基于现有的 `users` 表，需要新增以下表结构：

#### 2.1 导航分类表 (nav_categories)
```sql
CREATE TABLE nav_categories (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    parent_id INTEGER DEFAULT NULL,
    name TEXT NOT NULL,
    description TEXT,
    sort_order INTEGER DEFAULT 0,
    level INTEGER DEFAULT 1,
    is_public BOOLEAN DEFAULT TRUE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (parent_id) REFERENCES nav_categories(id)
);
```

#### 2.2 导航项目表 (navs)
```sql
CREATE TABLE navs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    category_id INTEGER NOT NULL,
    parent_id INTEGER DEFAULT NULL,
    title TEXT NOT NULL,
    url TEXT NOT NULL,
    description TEXT,
    icon TEXT,
    sort_order INTEGER DEFAULT 0,
    is_public BOOLEAN DEFAULT TRUE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (category_id) REFERENCES nav_categories(id),
    FOREIGN KEY (parent_id) REFERENCES navs(id)
);
```

### 3. 后端API接口需求

#### 3.1 用户认证接口 (已存在，需复用)
- `POST /api/auth/login` - 用户登录
- `POST /api/auth/logout` - 用户登出
- `GET /api/auth/profile` - 获取用户信息
- `GET /api/auth/verify` - 验证token

#### 3.2 导航分类管理接口 (新增)
- `GET /api/categories` - 获取分类列表
- `POST /api/categories` - 创建分类
- `PUT /api/categories/{id}` - 更新分类
- `DELETE /api/categories/{id}` - 删除分类
- `GET /api/categories/{id}/children` - 获取子分类

#### 3.3 导航项目管理接口 (新增)
- `GET /api/navs` - 获取导航列表
- `POST /api/navs` - 创建导航
- `PUT /api/navs/{id}` - 更新导航
- `DELETE /api/navs/{id}` - 删除导航
- `GET /api/navs/category/{category_id}` - 获取指定分类的导航

#### 3.4 公共接口 (客户端使用)
- `GET /api/public/categories` - 获取公开分类
- `GET /api/public/navs` - 获取公开导航
- `GET /api/public/navs/category/{category_id}` - 获取指定分类的公开导航

### 4. 前端管理系统需求

#### 4.1 页面结构
```
管理系统/
├── 登录页面 (复用现有login.html)
├── 主页面 (Dashboard)
│   ├── 侧边导航栏
│   ├── 顶部导航栏
│   └── 内容区域
├── 分类管理
│   ├── 分类列表
│   ├── 添加分类
│   ├── 编辑分类
│   └── 分类树形结构
├── 导航管理
│   ├── 导航列表
│   ├── 添加导航
│   ├── 编辑导航
│   └── 批量操作
└── 系统设置
    ├── 用户信息
    └── 系统配置
```

#### 4.2 核心功能
1. **用户认证**
   - 登录验证 (复用现有)
   - Token管理
   - 登录状态保持

2. **分类管理**
   - 树形分类展示
   - 拖拽排序
   - 批量操作
   - 公开/私有设置

3. **导航管理**
   - 表格形式展示
   - 搜索和筛选
   - 批量导入/导出
   - 图标管理

4. **数据统计**
   - 分类统计
   - 导航统计
   - 使用情况分析

### 5. 技术实现要点

#### 5.1 后端扩展
1. **模型层扩展**
   - 创建 Category 模型
   - 创建 Navigation 模型
   - 建立模型关联关系

2. **路由层扩展**
   - 创建分类管理路由
   - 创建导航管理路由
   - 创建公共API路由

3. **服务层设计**
   - 分类服务 (CategoryService)
   - 导航服务 (NavigationService)
   - 权限验证中间件

#### 5.2 前端开发
1. **项目初始化**
   - Vue3 + Vite 项目搭建
   - Element Plus UI框架集成
   - TypeScript 配置
   - 路由配置 (Vue Router)
   - 状态管理 (Pinia)

2. **组件设计**
   - 布局组件 (Layout)
   - 表格组件 (DataTable)
   - 树形组件 (TreeView)
   - 表单组件 (FormDialog)

3. **API集成**
   - Axios HTTP客户端
   - 请求拦截器 (Token注入)
   - 响应拦截器 (错误处理)
   - API接口封装

### 6. 开发步骤规划

#### 阶段一：后端扩展 (优先级：高)
1. 扩展数据库模型
2. 创建分类管理API
3. 创建导航管理API
4. 创建公共API接口
5. 完善权限验证

#### 阶段二：前端管理系统 (优先级：高)
1. 项目初始化和环境搭建
2. 登录系统集成
3. 主页面布局开发
4. 分类管理功能开发
5. 导航管理功能开发

#### 阶段三：功能完善 (优先级：中)
1. 数据导入导出功能
2. 批量操作功能
3. 搜索和筛选功能
4. 数据统计功能

#### 阶段四：优化和测试 (优先级：中)
1. 性能优化
2. 用户体验优化
3. 错误处理完善
4. 单元测试编写

### 7. 客户端集成考虑

#### 7.1 数据对接
- 客户端通过公共API获取导航数据
- 支持分类筛选和搜索
- 支持分页加载
- 缓存策略优化

#### 7.2 兼容性保证
- 保持现有客户端页面结构不变
- 通过JavaScript动态加载数据
- 渐进式升级策略

### 8. 安全考虑
1. **API安全**
   - JWT Token验证
   - 请求频率限制
   - 输入数据验证
   - SQL注入防护

2. **数据安全**
   - 敏感数据加密
   - 操作日志记录
   - 数据备份策略

### 9. 部署和维护
1. **开发环境**
   - 本地开发服务器
   - 热重载支持
   - 调试工具集成

2. **生产环境**
   - 静态文件构建
   - 服务器部署配置
   - 监控和日志

## 确认事项
1. 是否同意以上技术栈选择？
2. 是否同意数据库表结构设计？
3. 是否同意API接口设计？
4. 是否同意开发步骤规划？
5. 是否有其他特殊需求需要考虑？

请确认以上提示词内容，确认后将开始具体的代码开发工作。
